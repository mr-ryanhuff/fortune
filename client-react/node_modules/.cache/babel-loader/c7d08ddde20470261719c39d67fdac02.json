{"ast":null,"code":"import axios from 'axios';\nimport { Type } from './Types';\nimport { push } from 'connected-react-router';\nimport { handleAxiosError } from './Utils';\nimport { fetchAuthToken } from './Auth';\nexport const createGame = (activeCoins, endsOn, startingCash, title) => {\n  return async dispatch => {\n    try {\n      await fetchAuthToken();\n      const res = await axios.post('http://localhost:5000/game/', {\n        activeCoins,\n        endsOn,\n        startingCash,\n        title\n      });\n      const action = push(`/game/${res.data.id}`);\n      dispatch(action);\n    } catch (e) {\n      handleAxiosError(e, dispatch, Type.CREATE_GAME_FAILED);\n    }\n  };\n}; // get game by game ID\n\nexport const getGame = id => {\n  return async dispatch => {\n    try {\n      await fetchAuthToken();\n      const res = await axios.get(`http://localhost:5000/game/${id}`);\n      dispatch({\n        type: Type.SET_GAME,\n        payload: res.data.game\n      });\n      dispatch({\n        type: Type.SET_GAME_COINS,\n        payload: res.data.coins\n      });\n      dispatch({\n        type: Type.SET_GAME_PROFILE,\n        payload: res.data.gameProfile\n      });\n    } catch (e) {\n      handleAxiosError(e, dispatch, Type.SET_GAME_FAILED);\n    }\n  };\n}; // liquify\n\nexport const liquify = () => {\n  return async dispatch => {\n    try {\n      await fetchAuthToken();\n      const res = await axios.get(`http://localhost:5000/game/liquify`); // I'm thinking this method's response will contain a player's new gameProfile and gameCoins after liquifying\n\n      dispatch({\n        type: Type.SET_GAME_COINS,\n        payload: res.data.coins\n      });\n      dispatch({\n        type: Type.SET_GAME_PROFILE,\n        payload: res.data.gameProfile\n      });\n    } catch (e) {\n      handleAxiosError(e, dispatch, Type.LIQUIFY_FAILED);\n    }\n  };\n}; // transaction type will either be \"buy\" or \"sell\"\n\nexport const transaction = (amount, type) => {\n  return async dispatch => {\n    console.log(amount);\n    console.log(type);\n\n    try {\n      await fetchAuthToken();\n      const res = await axios.post(`http://localhost:5000/game/${type}`, {\n        amount\n      });\n      dispatch({\n        type: Type.TRANSACTION\n      });\n      dispatch({\n        type: Type.SET_GAME_COINS,\n        payload: res.data.coins\n      });\n      dispatch({\n        type: Type.SET_GAME_PROFILE,\n        payload: res.data.gameProfile\n      });\n    } catch (e) {\n      handleAxiosError(e, dispatch, Type.TRANSACTION_FAILED);\n    }\n  };\n}; // clear all error messages\n// used when a user cannot complete a transaction, but tries to make another\n\nexport const clearErrorMessages = () => {\n  return async dispatch => {\n    dispatch({\n      type: Type.CLEAR_ERRORS\n    });\n  };\n};","map":{"version":3,"sources":["/Users/akashlankala/Documents/CS 307/fortune-sprint_2_review/client-react/src/redux/actions/Game.ts"],"names":["axios","Type","push","handleAxiosError","fetchAuthToken","createGame","activeCoins","endsOn","startingCash","title","dispatch","res","post","action","data","id","e","CREATE_GAME_FAILED","getGame","get","type","SET_GAME","payload","game","SET_GAME_COINS","coins","SET_GAME_PROFILE","gameProfile","SET_GAME_FAILED","liquify","LIQUIFY_FAILED","transaction","amount","console","log","TRANSACTION","TRANSACTION_FAILED","clearErrorMessages","CLEAR_ERRORS"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,SAAQC,IAAR,QAAmB,SAAnB;AACA,SAAQC,IAAR,QAAmB,wBAAnB;AACA,SAAQC,gBAAR,QAA+B,SAA/B;AACA,SAASC,cAAT,QAA+B,QAA/B;AAkDA,OAAO,MAAMC,UAAU,GAAG,CACtBC,WADsB,EAEtBC,MAFsB,EAGtBC,YAHsB,EAItBC,KAJsB,KAKrB;AACH,SAAO,MAAOC,QAAP,IAAsC;AAC3C,QAAI;AACF,YAAMN,cAAc,EAApB;AACA,YAAMO,GAAuB,GAAG,MAAMX,KAAK,CAACY,IAAN,CAAW,6BAAX,EAA0C;AAACN,QAAAA,WAAD;AAAcC,QAAAA,MAAd;AAAsBC,QAAAA,YAAtB;AAAoCC,QAAAA;AAApC,OAA1C,CAAtC;AACA,YAAMI,MAAW,GAAGX,IAAI,CAAE,SAAQS,GAAG,CAACG,IAAJ,CAASC,EAAG,EAAtB,CAAxB;AACAL,MAAAA,QAAQ,CAACG,MAAD,CAAR;AACD,KALD,CAKE,OAAOG,CAAP,EAAU;AACVb,MAAAA,gBAAgB,CAACa,CAAD,EAAIN,QAAJ,EAAcT,IAAI,CAACgB,kBAAnB,CAAhB;AACD;AACF,GATD;AAUD,CAhBM,C,CAkBP;;AACA,OAAO,MAAMC,OAAO,GAClBH,EADqB,IAElB;AACH,SAAO,MAAOL,QAAP,IAAsC;AAC3C,QAAI;AACF,YAAMN,cAAc,EAApB;AACA,YAAMO,GAAG,GAAG,MAAMX,KAAK,CAACmB,GAAN,CAAW,8BAA6BJ,EAAG,EAA3C,CAAlB;AAEAL,MAAAA,QAAQ,CAAC;AAACU,QAAAA,IAAI,EAAEnB,IAAI,CAACoB,QAAZ;AAAsBC,QAAAA,OAAO,EAAEX,GAAG,CAACG,IAAJ,CAASS;AAAxC,OAAD,CAAR;AACAb,MAAAA,QAAQ,CAAC;AAACU,QAAAA,IAAI,EAAEnB,IAAI,CAACuB,cAAZ;AAA4BF,QAAAA,OAAO,EAAEX,GAAG,CAACG,IAAJ,CAASW;AAA9C,OAAD,CAAR;AACAf,MAAAA,QAAQ,CAAC;AAACU,QAAAA,IAAI,EAAEnB,IAAI,CAACyB,gBAAZ;AAA8BJ,QAAAA,OAAO,EAAEX,GAAG,CAACG,IAAJ,CAASa;AAAhD,OAAD,CAAR;AACD,KAPD,CAOE,OAAOX,CAAP,EAAU;AACVb,MAAAA,gBAAgB,CAACa,CAAD,EAAIN,QAAJ,EAAcT,IAAI,CAAC2B,eAAnB,CAAhB;AACD;AACF,GAXD;AAYD,CAfM,C,CAiBP;;AACA,OAAO,MAAMC,OAAO,GAAG,MAAM;AAC3B,SAAO,MAAOnB,QAAP,IAAsC;AAC3C,QAAI;AACF,YAAMN,cAAc,EAApB;AACA,YAAMO,GAAG,GAAG,MAAMX,KAAK,CAACmB,GAAN,CAAW,oCAAX,CAAlB,CAFE,CAIF;;AACAT,MAAAA,QAAQ,CAAC;AAACU,QAAAA,IAAI,EAAEnB,IAAI,CAACuB,cAAZ;AAA4BF,QAAAA,OAAO,EAAEX,GAAG,CAACG,IAAJ,CAASW;AAA9C,OAAD,CAAR;AACAf,MAAAA,QAAQ,CAAC;AAACU,QAAAA,IAAI,EAAEnB,IAAI,CAACyB,gBAAZ;AAA8BJ,QAAAA,OAAO,EAAEX,GAAG,CAACG,IAAJ,CAASa;AAAhD,OAAD,CAAR;AACD,KAPD,CAOE,OAAOX,CAAP,EAAU;AACVb,MAAAA,gBAAgB,CAACa,CAAD,EAAIN,QAAJ,EAAcT,IAAI,CAAC6B,cAAnB,CAAhB;AACD;AACF,GAXD;AAYD,CAbM,C,CAeP;;AACA,OAAO,MAAMC,WAAW,GAAG,CACzBC,MADyB,EAEzBZ,IAFyB,KAGtB;AACH,SAAO,MAAOV,QAAP,IAAsC;AAC3CuB,IAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYd,IAAZ;;AACA,QAAI;AACF,YAAMhB,cAAc,EAApB;AACA,YAAMO,GAAG,GAAG,MAAMX,KAAK,CAACY,IAAN,CAAY,8BAA6BQ,IAAK,EAA9C,EAAiD;AAACY,QAAAA;AAAD,OAAjD,CAAlB;AAEAtB,MAAAA,QAAQ,CAAC;AAACU,QAAAA,IAAI,EAAEnB,IAAI,CAACkC;AAAZ,OAAD,CAAR;AACAzB,MAAAA,QAAQ,CAAC;AAACU,QAAAA,IAAI,EAAEnB,IAAI,CAACuB,cAAZ;AAA4BF,QAAAA,OAAO,EAAEX,GAAG,CAACG,IAAJ,CAASW;AAA9C,OAAD,CAAR;AACAf,MAAAA,QAAQ,CAAC;AAACU,QAAAA,IAAI,EAAEnB,IAAI,CAACyB,gBAAZ;AAA8BJ,QAAAA,OAAO,EAAEX,GAAG,CAACG,IAAJ,CAASa;AAAhD,OAAD,CAAR;AACD,KAPD,CAOE,OAAOX,CAAP,EAAU;AACVb,MAAAA,gBAAgB,CAACa,CAAD,EAAIN,QAAJ,EAAcT,IAAI,CAACmC,kBAAnB,CAAhB;AACD;AACF,GAbD;AAcD,CAlBM,C,CAoBP;AACA;;AACA,OAAO,MAAMC,kBAAkB,GAAG,MAAM;AACtC,SAAO,MAAO3B,QAAP,IAAsC;AAC3CA,IAAAA,QAAQ,CAAC;AAACU,MAAAA,IAAI,EAAEnB,IAAI,CAACqC;AAAZ,KAAD,CAAR;AACD,GAFD;AAGD,CAJM","sourcesContent":["import axios from 'axios'\nimport { Dispatch } from 'redux'\nimport { Action } from '../reducers/AuthReducer'\nimport {Type} from './Types'\nimport {push} from 'connected-react-router'\nimport {handleAxiosError} from './Utils'\nimport { fetchAuthToken } from './Auth'\n\ntype CreateGameResponse = {\n  data: {\n    id: number;\n    name: string;\n    startingCash: string;\n    shareableLink: string;\n    shareableCode: string;\n    endsAt: Date;\n  }\n}\n\nexport type GameDataType = {\n  name: string;\n  startingCash: string;\n  shareableLink: string;\n  shareableCode: string;\n  endsAt?: Date;\n}\n\nexport type GetGameResponse = {\n  data: {\n    game: GameType,\n    gameProfile: {\n      cash: string;\n    }\n    coins: Array<{\n      id: string;\n      name: string;\n      symbol: string;\n      number: string;\n    }>\n  }\n}\n\nexport type GameType = {\n  data: GameDataType,\n  gameProfile: {\n    cash: string,\n    netWorth: string,\n  },\n  coins: Array<{\n    id: string;\n    name: string;\n    symbol: string;\n    number: number;\n  }>\n}\n\nexport const createGame = (\n    activeCoins: Array<{ id: string, name: string }>,\n    endsOn: Date,\n    startingCash: string,\n    title: string\n) => {\n  return async (dispatch: Dispatch<Action>) => {\n    try {\n      await fetchAuthToken();\n      const res: CreateGameResponse = await axios.post('http://localhost:5000/game/', {activeCoins, endsOn, startingCash, title});\n      const action: any = push(`/game/${res.data.id}`);\n      dispatch(action);\n    } catch (e) {\n      handleAxiosError(e, dispatch, Type.CREATE_GAME_FAILED);\n    }\n  }\n}\n\n// get game by game ID\nexport const getGame = (\n  id: number\n) => {\n  return async (dispatch: Dispatch<Action>) => {\n    try {\n      await fetchAuthToken();\n      const res = await axios.get(`http://localhost:5000/game/${id}`);\n\n      dispatch({type: Type.SET_GAME, payload: res.data.game});\n      dispatch({type: Type.SET_GAME_COINS, payload: res.data.coins});\n      dispatch({type: Type.SET_GAME_PROFILE, payload: res.data.gameProfile});\n    } catch (e) {\n      handleAxiosError(e, dispatch, Type.SET_GAME_FAILED);\n    }\n  }\n}\n\n// liquify\nexport const liquify = () => {\n  return async (dispatch: Dispatch<Action>) => {\n    try {\n      await fetchAuthToken();\n      const res = await axios.get(`http://localhost:5000/game/liquify`);\n\n      // I'm thinking this method's response will contain a player's new gameProfile and gameCoins after liquifying\n      dispatch({type: Type.SET_GAME_COINS, payload: res.data.coins});\n      dispatch({type: Type.SET_GAME_PROFILE, payload: res.data.gameProfile});\n    } catch (e) {\n      handleAxiosError(e, dispatch, Type.LIQUIFY_FAILED);\n    }\n  }\n}\n\n// transaction type will either be \"buy\" or \"sell\"\nexport const transaction = (\n  amount: string,\n  type: string,\n) => {\n  return async (dispatch: Dispatch<Action>) => {\n    console.log(amount)\n    console.log(type)\n    try {\n      await fetchAuthToken();\n      const res = await axios.post(`http://localhost:5000/game/${type}`, {amount});\n\n      dispatch({type: Type.TRANSACTION});\n      dispatch({type: Type.SET_GAME_COINS, payload: res.data.coins});\n      dispatch({type: Type.SET_GAME_PROFILE, payload: res.data.gameProfile});\n    } catch (e) {\n      handleAxiosError(e, dispatch, Type.TRANSACTION_FAILED);\n    }\n  }\n}\n\n// clear all error messages\n// used when a user cannot complete a transaction, but tries to make another\nexport const clearErrorMessages = () => {\n  return async (dispatch: Dispatch<Action>) => {\n    dispatch({type: Type.CLEAR_ERRORS});\n  }\n}\n"]},"metadata":{},"sourceType":"module"}