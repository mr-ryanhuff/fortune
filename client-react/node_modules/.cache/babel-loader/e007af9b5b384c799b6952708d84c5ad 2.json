{"ast":null,"code":"var _jsxFileName = \"/Users/akashlankala/Documents/CS 307/fortune-sprint_2_review/client-react/src/play/Play.tsx\";\nimport * as React from 'react';\nimport { Alert, Button, Container, Dropdown, DropdownButton, FormControl, InputGroup, Modal, Row } from \"react-bootstrap\";\nimport './Play.css';\nimport ActiveGames from \"./active\";\nimport assert from \"assert\";\nimport Pagination from \"../pagination\";\nimport Actions from \"../redux/actions\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from 'react-router-dom';\nconst buttonStyle = {\n  width: 100,\n  height: 38,\n  marginRight: 2,\n  marginLeft: 2\n};\nvar SortCriteriaKey;\n\n(function (SortCriteriaKey) {\n  SortCriteriaKey[\"TITLE_ASCENDING\"] = \"titleAscending\";\n  SortCriteriaKey[\"TITLE_DESCENDING\"] = \"titleDescending\";\n  SortCriteriaKey[\"ENDTIME_ASCENDING\"] = \"endTimeAscending\";\n  SortCriteriaKey[\"ENDTIME_DESCENDING\"] = \"endTimeDescending\";\n})(SortCriteriaKey || (SortCriteriaKey = {}));\n\nclass Play extends React.Component {\n  constructor(props) {\n    super(props);\n    this.pageNumber = 1;\n    this.keyword = '';\n    this.sortCriteria = {\n      titleAscending: false,\n      titleDescending: false,\n      endTimeAscending: false,\n      endTimeDescending: false\n    };\n    this.gameCode = '';\n\n    this.handleShowJoinModal = () => {\n      this.setState({\n        showJoinModal: true\n      });\n    };\n\n    this.handleHideJoinModal = () => {\n      this.setState({\n        showJoinModal: false\n      });\n    };\n\n    this.handleModalKeyPress = event => {\n      if (event.key === \"Enter\") {\n        this.handleJoinGame(event);\n      }\n    };\n\n    this.handleGameCodeChange = event => {\n      this.gameCode = event.target.value.trim();\n    };\n\n    this.handleJoinGame = event => {\n      // TODO: Show error if code is invalid/game doesn't exist. Add player to the game if it exists.\n      if (this.gameCode == \"\") {\n        return;\n      }\n\n      this.props.joinGame(this.gameCode);\n      this.setGameNotFoundDismissed(false);\n      this.handleHideJoinModal();\n    };\n\n    this.handleKeywordChange = event => {\n      this.keyword = event.target.value.trim();\n    };\n\n    this.handleSearchGames = _event => {\n      this.pageNumber = 1;\n      this.updateBackendData();\n    };\n\n    this.handleSearchBarKeyPress = event => {\n      if (event.key === \"Enter\") {\n        this.handleSearchGames(event);\n      }\n    };\n\n    this.handlePageChange = pageNumber => {\n      this.pageNumber = pageNumber;\n      this.updateBackendData();\n    };\n\n    this.state = {\n      showJoinModal: false,\n      gameNotFoundDismissed: false\n    };\n  }\n\n  componentDidMount() {\n    this.updateBackendData();\n  }\n\n  updateBackendData(resetPageNumber = false) {\n    if (resetPageNumber) {\n      this.pageNumber = 1;\n    }\n\n    this.props.activeGamesAtPage(this.pageNumber, this.keyword, this.sortCriteria);\n    console.log(\"API\", this.props.gamesInPage);\n  }\n\n  toggleSortCriteria(criteria) {\n    let sortCriteriaProps = Object.keys(this.sortCriteria);\n    assert(sortCriteriaProps.includes(criteria));\n    let prevCriteriaValue = this.sortCriteria[criteria];\n    sortCriteriaProps.forEach(prop => {\n      this.sortCriteria[prop] = false;\n    });\n    this.sortCriteria[criteria] = !prevCriteriaValue;\n    this.updateBackendData(true);\n  }\n\n  setGameNotFoundDismissed(val) {\n    console.log(\"Dismissed: \", val);\n    this.setState({\n      gameNotFoundDismissed: val\n    });\n  }\n\n  render() {\n    if (this.props.redirectLink != \"\") {\n      return React.createElement(Redirect, {\n        to: this.props.redirectLink,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: 'container',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, this.props.showGameNotFound && !this.state.gameNotFoundDismissed && React.createElement(Alert, {\n      variant: \"danger\",\n      onClose: () => this.setGameNotFoundDismissed(true),\n      dismissible: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"Invalid game code!\"), React.createElement(\"div\", {\n      className: \"title-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Play\")), React.createElement(\"div\", {\n      className: \"toolbar-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"searchbar-wrapper\",\n      style: {\n        marginRight: 5\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      onChange: this.handleKeywordChange,\n      onKeyPress: this.handleSearchBarKeyPress,\n      placeholder: \"Game title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(InputGroup.Append, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.handleSearchGames,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Search\")))), React.createElement(\"div\", {\n      className: \"widgets-wrapper\",\n      style: {\n        marginRight: 40\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(DropdownButton, {\n      id: 'dropdown-basic-button',\n      title: 'Sort by',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(Dropdown.Item, {\n      eventKey: \"1\",\n      active: this.sortCriteria.titleAscending,\n      onClick: () => this.toggleSortCriteria(SortCriteriaKey.TITLE_ASCENDING),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"Title: Ascending\"), React.createElement(Dropdown.Item, {\n      eventKey: \"2\",\n      active: this.sortCriteria.titleDescending,\n      onClick: () => this.toggleSortCriteria(SortCriteriaKey.TITLE_DESCENDING),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Title: Descending\"), React.createElement(Dropdown.Item, {\n      eventKey: \"3\",\n      active: this.sortCriteria.endTimeAscending,\n      onClick: () => this.toggleSortCriteria(SortCriteriaKey.ENDTIME_ASCENDING),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"End Time: Ascending\"), React.createElement(Dropdown.Item, {\n      eventKey: \"4\",\n      active: this.sortCriteria.endTimeDescending,\n      onClick: () => this.toggleSortCriteria(SortCriteriaKey.ENDTIME_DESCENDING),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"End Time: Descending\"))), React.createElement(\"div\", {\n      className: \"widgets-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: buttonStyle,\n      variant: \"primary\",\n      onClick: this.handleShowJoinModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \" Join \"), React.createElement(Button, {\n      style: buttonStyle,\n      href: \"/create\",\n      variant: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \" Create \"))), React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(ActiveGames, {\n      games: this.props.gamesInPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(Pagination, {\n      currentPage: this.pageNumber,\n      pageSize: this.props.pageSize,\n      totalItems: this.props.totalGames,\n      handlePageChange: this.handlePageChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }))), React.createElement(Modal, {\n      show: this.state.showJoinModal,\n      onHide: this.handleHideJoinModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"Join a Game\")), React.createElement(Modal.Body, {\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        marginLeft: 50,\n        marginRight: 50,\n        marginTop: 15,\n        marginBottom: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(InputGroup.Prepend, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(InputGroup.Text, {\n      style: {\n        background: \"#2a79f7\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \"Code\")), React.createElement(FormControl, {\n      onChange: this.handleGameCodeChange,\n      onKeyPress: this.handleModalKeyPress,\n      placeholder: \"Enter the unique game code\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      style: {\n        width: 90\n      },\n      onClick: this.handleJoinGame,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, \"Join\"), React.createElement(Button, {\n      variant: \"primary\",\n      style: {\n        width: 90\n      },\n      onClick: this.handleHideJoinModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, \"Close\"))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  gamesInPage: state.play.gamesInPage,\n  totalGames: state.play.totalGames,\n  pageSize: state.play.pageSize,\n  redirectLink: state.play.redirectLink,\n  showGameNotFound: state.play.showGameNotFound\n});\n\nconst mapDispatchToProps = {\n  activeGamesAtPage: Actions.play.activeGamesAtPage,\n  joinGame: Actions.play.joinGame\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Play);","map":{"version":3,"sources":["/Users/akashlankala/Documents/CS 307/fortune-sprint_2_review/client-react/src/play/Play.tsx"],"names":["React","Alert","Button","Container","Dropdown","DropdownButton","FormControl","InputGroup","Modal","Row","ActiveGames","assert","Pagination","Actions","connect","Redirect","buttonStyle","width","height","marginRight","marginLeft","SortCriteriaKey","Play","Component","constructor","props","pageNumber","keyword","sortCriteria","titleAscending","titleDescending","endTimeAscending","endTimeDescending","gameCode","handleShowJoinModal","setState","showJoinModal","handleHideJoinModal","handleModalKeyPress","event","key","handleJoinGame","handleGameCodeChange","target","value","trim","joinGame","setGameNotFoundDismissed","handleKeywordChange","handleSearchGames","_event","updateBackendData","handleSearchBarKeyPress","handlePageChange","state","gameNotFoundDismissed","componentDidMount","resetPageNumber","activeGamesAtPage","console","log","gamesInPage","toggleSortCriteria","criteria","sortCriteriaProps","Object","keys","includes","prevCriteriaValue","forEach","prop","val","render","redirectLink","showGameNotFound","TITLE_ASCENDING","TITLE_DESCENDING","ENDTIME_ASCENDING","ENDTIME_DESCENDING","pageSize","totalGames","display","flexDirection","alignItems","marginTop","marginBottom","background","color","mapStateToProps","play","mapDispatchToProps"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {Alert, Button, Container, Dropdown, DropdownButton, FormControl, InputGroup, Modal, Row} from \"react-bootstrap\";\nimport './Play.css'\nimport {CSSProperties} from \"react\";\nimport ActiveGames from \"./active\";\nimport assert from \"assert\";\nimport Pagination from \"../pagination\";\nimport {RootState} from \"../redux/reducers\";\nimport {GameType} from \"../redux/reducers/PlayReducer\";\nimport Actions from \"../redux/actions\";\nimport {connect} from \"react-redux\";\nimport { Redirect } from 'react-router-dom';\n\nconst buttonStyle: CSSProperties = {\n    width: 100,\n    height: 38,\n    marginRight: 2,\n    marginLeft: 2\n};\n\ninterface PlayProp {\n    activeGamesAtPage: (\n        pageNumber: number,\n        keyword: string,\n        sortCriteria: SortCriteriaType\n    ) => {}\n    gamesInPage: GameType[],\n    pageSize: number,\n    totalGames: number,\n    joinGame: (\n        code: string,\n    ) => {},\n    redirectLink: string,\n    showGameNotFound: boolean,\n}\n\ninterface PlayState {\n    showJoinModal: boolean,\n    gameNotFoundDismissed: boolean,\n}\n\nexport type SortCriteriaType = {\n    // NOTE: Update SortCriteriaKey too if any attributes were changed\n    [key: string]: boolean,\n    titleAscending: boolean,\n    titleDescending: boolean,\n    endTimeAscending: boolean,\n    endTimeDescending: boolean\n}\n\nenum SortCriteriaKey {\n    // The value corresponds to the attribute name in SortCriteria\n    TITLE_ASCENDING = \"titleAscending\",\n    TITLE_DESCENDING = \"titleDescending\",\n    ENDTIME_ASCENDING = \"endTimeAscending\",\n    ENDTIME_DESCENDING = \"endTimeDescending\",\n}\n\nclass Play extends React.Component<PlayProp, PlayState> {\n    pageNumber: number = 1;\n    keyword: string = '';\n    sortCriteria: SortCriteriaType = {\n        titleAscending: false,\n        titleDescending: false,\n        endTimeAscending: false,\n        endTimeDescending: false\n    };\n    gameCode = '';\n\n    constructor(props: PlayProp) {\n        super(props);\n\n        this.state = {\n            showJoinModal: false,\n            gameNotFoundDismissed: false,\n        };\n    }\n\n    componentDidMount(): void {\n        this.updateBackendData();\n    }\n\n    updateBackendData(resetPageNumber= false) {\n        if (resetPageNumber) {\n            this.pageNumber = 1;\n        }\n        this.props.activeGamesAtPage(\n            this.pageNumber,\n            this.keyword,\n            this.sortCriteria\n        );\n        console.log(\"API\", this.props.gamesInPage)\n    }\n\n    toggleSortCriteria(criteria: string) {\n        let sortCriteriaProps = Object.keys(this.sortCriteria);\n        assert(sortCriteriaProps.includes(criteria));\n\n        let prevCriteriaValue: boolean = (this.sortCriteria as SortCriteriaType)[criteria];\n        sortCriteriaProps.forEach((prop) => {\n            this.sortCriteria[prop] = false;\n        });\n\n        this.sortCriteria[criteria] = !prevCriteriaValue;\n        this.updateBackendData(true);\n    }\n\n    handleShowJoinModal = () => {\n        this.setState({showJoinModal: true})\n    };\n\n    handleHideJoinModal = () => {\n        this.setState({showJoinModal: false})\n    };\n\n    handleModalKeyPress = (event: any) => {\n        if (event.key === \"Enter\") {\n            this.handleJoinGame(event);\n        }\n    };\n\n    handleGameCodeChange = (event: any) => {\n        this.gameCode = event.target.value.trim();\n    };\n\n    handleJoinGame = (event: any) => {\n        // TODO: Show error if code is invalid/game doesn't exist. Add player to the game if it exists.\n        if (this.gameCode == \"\") {\n            return\n        }\n        this.props.joinGame(this.gameCode);\n        this.setGameNotFoundDismissed(false)\n        this.handleHideJoinModal()\n    };\n\n    handleKeywordChange = (event: any) => {\n        this.keyword = event.target.value.trim();\n    };\n\n    setGameNotFoundDismissed(val: boolean) {\n        console.log(\"Dismissed: \", val)\n        this.setState({gameNotFoundDismissed: val})\n    }\n\n    handleSearchGames = (_event: any) => {\n        this.pageNumber = 1;\n        this.updateBackendData()\n    };\n\n    handleSearchBarKeyPress = (event: any) => {\n        if (event.key === \"Enter\") {\n            this.handleSearchGames(event);\n        }\n    };\n\n    handlePageChange = (pageNumber: number) => {\n        this.pageNumber = pageNumber;\n        this.updateBackendData()\n    };\n\n    render() {\n        if (this.props.redirectLink != \"\") {\n            return <Redirect to={this.props.redirectLink}/>\n        }\n        return (\n            <div className={'container'}>\n                {this.props.showGameNotFound\n                && !this.state.gameNotFoundDismissed\n                && <Alert variant={\"danger\"}\n                          onClose={() => this.setGameNotFoundDismissed(true)}\n                          dismissible={true}>\n                    Invalid game code!\n                </Alert>\n                }\n                <div className={\"title-wrapper\"}>\n                    <h1>Play</h1>\n                </div>\n                <div className={\"toolbar-wrapper\"}>\n                    <div className={\"searchbar-wrapper\"} style={{marginRight:5}}>\n                        <InputGroup>\n                            <FormControl\n                                onChange={this.handleKeywordChange}\n                                onKeyPress={this.handleSearchBarKeyPress}\n                                placeholder={\"Game title\"}\n                            />\n                            <InputGroup.Append>\n                                <Button\n                                    variant={\"primary\"}\n                                    onClick={this.handleSearchGames}\n                                >Search</Button>\n                            </InputGroup.Append>\n                        </InputGroup>\n                    </div>\n                    <div className={\"widgets-wrapper\"} style={{marginRight:40}}>\n                        <DropdownButton\n                            id={'dropdown-basic-button'}\n                            title={'Sort by'}\n                        >\n                            <Dropdown.Item\n                                eventKey=\"1\"\n                                active={this.sortCriteria.titleAscending}\n                                onClick={() => this.toggleSortCriteria(SortCriteriaKey.TITLE_ASCENDING)}\n                            >Title: Ascending</Dropdown.Item>\n                            <Dropdown.Item\n                                eventKey=\"2\"\n                                active={this.sortCriteria.titleDescending}\n                                onClick={() => this.toggleSortCriteria(SortCriteriaKey.TITLE_DESCENDING)}\n                            >Title: Descending</Dropdown.Item>\n                            <Dropdown.Item\n                                eventKey=\"3\"\n                                active={this.sortCriteria.endTimeAscending}\n                                onClick={() => this.toggleSortCriteria(SortCriteriaKey.ENDTIME_ASCENDING)}\n                            >End Time: Ascending</Dropdown.Item>\n                            <Dropdown.Item\n                                eventKey=\"4\"\n                                active={this.sortCriteria.endTimeDescending}\n                                onClick={() => this.toggleSortCriteria(SortCriteriaKey.ENDTIME_DESCENDING)}\n                            >End Time: Descending</Dropdown.Item>\n                        </DropdownButton>\n                    </div>\n                    <div className={\"widgets-wrapper\"}>\n                        <Button\n                            style={buttonStyle}\n                            variant={\"primary\"}\n                            onClick={this.handleShowJoinModal}\n                        > Join </Button>\n                        <Button\n                            style={buttonStyle}\n                            href={\"/create\"}\n                            variant={\"primary\"}\n                        > Create </Button>\n                    </div>\n                </div>\n\n                <Container>\n                    <ActiveGames games={this.props.gamesInPage}/>\n                    <Row>\n                        <Pagination\n                            currentPage={this.pageNumber}\n                            pageSize={this.props.pageSize}\n                            totalItems={this.props.totalGames}\n                            handlePageChange={this.handlePageChange}\n                        />\n                    </Row>\n                </Container>\n\n                <Modal show={this.state.showJoinModal} onHide={this.handleHideJoinModal}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Join a Game</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body style={{display: \"flex\", flexDirection: \"column\", alignItems: \"center\",\n                        marginLeft: 50, marginRight: 50, marginTop: 15, marginBottom: 15}}>\n                        <InputGroup\n                        >\n                            <InputGroup.Prepend>\n                                <InputGroup.Text style={{background:\"#2a79f7\", color:\"white\"}}>Code</InputGroup.Text>\n                            </InputGroup.Prepend>\n                            <FormControl\n                                onChange={this.handleGameCodeChange}\n                                onKeyPress={this.handleModalKeyPress}\n                                placeholder={\"Enter the unique game code\"}\n                            />\n                        </InputGroup>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant={\"primary\"} style={{width: 90}} onClick={this.handleJoinGame}>\n                        Join\n                    </Button>\n                    <Button variant={\"primary\"} style={{width: 90}} onClick={this.handleHideJoinModal}>\n                        Close\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state: RootState) => ({\n    gamesInPage: state.play.gamesInPage,\n    totalGames: state.play.totalGames,\n    pageSize: state.play.pageSize,\n    redirectLink: state.play.redirectLink,\n    showGameNotFound: state.play.showGameNotFound,\n});\n\nconst mapDispatchToProps = {\n    activeGamesAtPage: Actions.play.activeGamesAtPage,\n    joinGame: Actions.play.joinGame,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Play);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}