{"ast":null,"code":"import axios from 'axios';\nimport { Type } from './Types';\nimport { handleAxiosError } from './Utils';\nimport { fetchAuthToken } from \"./Auth\";\nexport const activeGamesAtPage = (pageNumber, keyword, sortCriteria) => {\n  return async dispatch => {\n    try {\n      await fetchAuthToken();\n      const res = await axios.get('http://localhost:5000/play', {\n        params: {\n          page: pageNumber,\n          keyword: keyword,\n          criteria: sortCriteria\n        }\n      });\n      dispatch({\n        type: Type.GET_ACTIVE_GAMES,\n        payload: res.data\n      });\n    } catch (e) {\n      handleAxiosError(e, dispatch, Type.GET_ACTIVE_GAMES_FAILED);\n    }\n  };\n};\nexport const joinGame = code => {\n  return async dispatch => {\n    try {\n      await fetchAuthToken();\n      const res = await axios.get('http://localhost:5000/join', {\n        params: {\n          code: code\n        }\n      });\n      console.log(\"Join Response\", res.data);\n      dispatch({\n        type: Type.JOIN_GAME,\n        payload: res.data\n      });\n    } catch (e) {\n      handleAxiosError(e, dispatch, Type.JOIN_GAME_FAILED);\n    }\n  };\n};","map":{"version":3,"sources":["/Users/akashlankala/Documents/CS 307/fortune-sprint_2_review/client-react/src/redux/actions/Play.ts"],"names":["axios","Type","handleAxiosError","fetchAuthToken","activeGamesAtPage","pageNumber","keyword","sortCriteria","dispatch","res","get","params","page","criteria","type","GET_ACTIVE_GAMES","payload","data","e","GET_ACTIVE_GAMES_FAILED","joinGame","code","console","log","JOIN_GAME","JOIN_GAME_FAILED"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,SAAQC,IAAR,QAAmB,SAAnB;AAGA,SAAQC,gBAAR,QAA+B,SAA/B;AACA,SAAQC,cAAR,QAA6B,QAA7B;AAkBA,OAAO,MAAMC,iBAAiB,GAAG,CAC7BC,UAD6B,EAE7BC,OAF6B,EAG7BC,YAH6B,KAGM;AACnC,SAAO,MAAOC,QAAP,IAAsC;AACzC,QAAI;AACA,YAAML,cAAc,EAApB;AACA,YAAMM,GAAG,GAAG,MAAMT,KAAK,CAACU,GAAN,CAAU,4BAAV,EACd;AAACC,QAAAA,MAAM,EAAE;AAACC,UAAAA,IAAI,EAAEP,UAAP;AAAmBC,UAAAA,OAAO,EAAEA,OAA5B;AAAqCO,UAAAA,QAAQ,EAAEN;AAA/C;AAAT,OADc,CAAlB;AAEAC,MAAAA,QAAQ,CAAC;AAACM,QAAAA,IAAI,EAAEb,IAAI,CAACc,gBAAZ;AAA8BC,QAAAA,OAAO,EAAEP,GAAG,CAACQ;AAA3C,OAAD,CAAR;AACH,KALD,CAKE,OAAOC,CAAP,EAAU;AACRhB,MAAAA,gBAAgB,CAACgB,CAAD,EAAIV,QAAJ,EAAcP,IAAI,CAACkB,uBAAnB,CAAhB;AACH;AACJ,GATD;AAUH,CAdM;AAgBP,OAAO,MAAMC,QAAQ,GACjBC,IADoB,IACH;AACjB,SAAO,MAAOb,QAAP,IAAsC;AACzC,QAAI;AACA,YAAML,cAAc,EAApB;AACA,YAAMM,GAAG,GAAG,MAAMT,KAAK,CAACU,GAAN,CAAU,4BAAV,EACd;AAACC,QAAAA,MAAM,EAAE;AAACU,UAAAA,IAAI,EAAEA;AAAP;AAAT,OADc,CAAlB;AAEAC,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6Bd,GAAG,CAACQ,IAAjC;AACAT,MAAAA,QAAQ,CAAC;AAACM,QAAAA,IAAI,EAAEb,IAAI,CAACuB,SAAZ;AAAuBR,QAAAA,OAAO,EAAEP,GAAG,CAACQ;AAApC,OAAD,CAAR;AACH,KAND,CAME,OAAOC,CAAP,EAAU;AACRhB,MAAAA,gBAAgB,CAACgB,CAAD,EAAIV,QAAJ,EAAcP,IAAI,CAACwB,gBAAnB,CAAhB;AACH;AACJ,GAVD;AAWH,CAbM","sourcesContent":["import axios from 'axios'\r\nimport { Dispatch } from 'redux'\r\nimport { Action } from '../reducers/AuthReducer'\r\nimport {Type} from './Types'\r\nimport {SortCriteriaType} from '../../play/Play'\r\nimport {push} from 'connected-react-router'\r\nimport {handleAxiosError} from './Utils'\r\nimport {fetchAuthToken} from \"./Auth\";\r\n\r\ntype ActiveGamesAtPageResponse = {\r\n    data: {\r\n        games: [],\r\n        totalGames: number,\r\n        pageSize: number,\r\n    }\r\n}\r\n\r\ntype JoinGameResponse = {\r\n    data: {\r\n        games: [],\r\n        totalGames: number,\r\n        pageSize: number,\r\n    }\r\n}\r\n\r\nexport const activeGamesAtPage = (\r\n    pageNumber: number,\r\n    keyword: string,\r\n    sortCriteria: SortCriteriaType) => {\r\n    return async (dispatch: Dispatch<Action>) => {\r\n        try {\r\n            await fetchAuthToken();\r\n            const res = await axios.get('http://localhost:5000/play',\r\n                {params: {page: pageNumber, keyword: keyword, criteria: sortCriteria}});\r\n            dispatch({type: Type.GET_ACTIVE_GAMES, payload: res.data})\r\n        } catch (e) {\r\n            handleAxiosError(e, dispatch, Type.GET_ACTIVE_GAMES_FAILED)\r\n        }\r\n    }\r\n};\r\n\r\nexport const joinGame = (\r\n    code: string) => {\r\n    return async (dispatch: Dispatch<Action>) => {\r\n        try {\r\n            await fetchAuthToken();\r\n            const res = await axios.get('http://localhost:5000/join',\r\n                {params: {code: code}});\r\n            console.log(\"Join Response\", res.data)\r\n            dispatch({type: Type.JOIN_GAME, payload: res.data})\r\n        } catch (e) {\r\n            handleAxiosError(e, dispatch, Type.JOIN_GAME_FAILED)\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}